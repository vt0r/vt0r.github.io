<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=author content="SALVATORE LAMENDOLA (vt0r)"><meta name=description content="So let&rsquo;s say you&rsquo;ve got a Juniper MAG or SRX or similar unit at work that supports SSL VPN. Now let&rsquo;s say you&rsquo;re running 64-bit Linux at home and need to connect to said VPN. I doubt it makes much difference which distro you use, but I&rsquo;m going to assume you&rsquo;re really cool and are using a Debian-based one. So there are a few necessary steps required to get this Java-based VPN client running, and if you follow this tutorial, you&rsquo;ll have it working in no time."><meta property="og:title" content="Getting Juniper Network Connect to Work on 64-bit Linux"><meta property="og:description" content="So let&rsquo;s say you&rsquo;ve got a Juniper MAG or SRX or similar unit at work that supports SSL VPN. Now let&rsquo;s say you&rsquo;re running 64-bit Linux at home and need to connect to said VPN. I doubt it makes much difference which distro you use, but I&rsquo;m going to assume you&rsquo;re really cool and are using a Debian-based one. So there are a few necessary steps required to get this Java-based VPN client running, and if you follow this tutorial, you&rsquo;ll have it working in no time."><meta property="og:type" content="article"><meta property="og:url" content="https://lamendola.me/2012/06/05/getting-juniper-network-connect-to-work-on-64-bit-linux/"><meta property="article:published_time" content="2012-06-05T21:37:40+00:00"><meta property="article:modified_time" content="2012-06-05T21:37:40+00:00"><title>Getting Juniper Network Connect to Work on 64-bit Linux</title><link rel=canonical href=https://lamendola.me/2012/06/05/getting-juniper-network-connect-to-work-on-64-bit-linux/><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Source+Sans+Pro:400"><link rel=stylesheet href=/css/reset.css><link rel=stylesheet href=/css/pygments.css><link rel=stylesheet href=/css/main.css><link rel="shortcut icon" href=/images/favicon.ico></head><body lang=en><section class=header><div class=container><div class=content><a href=/><img class=avatar src=/images/avatar@2x.png srcset="https://lamendola.me/images/avatar@2x.png 1x"></a>
<a href=/><div class=name>SALVATORE LAMENDOLA (vt0r)</div></a><nav><ul><li class=nav-><a href=https://lamendola.me/about/><span>About</span></a></li><li class=nav-blog><a href=https://lamendola.me/blog/><span>Blog</span></a></li><li class=nav-><a href=https://ip.lamendola.me/><span>What's my IP?</span></a></li><li class=nav-><a href=https://1a4.fr/><span>Encrypted Pastebin</span></a></li></ul></nav></div></div></section><section class=icons><div class=container><div class=content><a href=https://github.com/vt0r target=_blank rel=noopener><img class=icon src=/img/github.svg alt=github></a>
<a href=https://keybase.io/vt0r target=_blank rel=noopener><img class=icon src=/img/keybase.svg alt=keybase></a>
<a href=https://www.linkedin.com/in/salvatorelamendola target=_blank rel=noopener><img class=icon src=/img/linkedin.svg alt=linkedin></a>
<a href=mailto:salvatore[at@@]lamendola[dot..]me><img class=icon src=/img/email.svg alt=email></a></div></div></section><section class="main post non-narrow zero-top-spacing"><div class=container><div class=content><div class=front-matter><div class=title-container><div class=page-heading>Getting Juniper Network Connect to Work on 64-bit Linux</div><div class=initials><a href=https://lamendola.me></a></div></div><div class=meta><div class=date title="Tue Jun 5 2012 21:37:40 UTC">Jun 5, 2012</div><div class=reading-time><div class=middot></div>2 minutes read</div></div></div><div class=markdown><p>So let&rsquo;s say you&rsquo;ve got a Juniper MAG or SRX or similar unit at work that supports SSL VPN. Now let&rsquo;s say you&rsquo;re running 64-bit Linux at home and need to connect to said VPN. I doubt it makes much difference which distro you use, but I&rsquo;m going to assume you&rsquo;re really cool and are using a Debian-based one. So there are a few necessary steps required to get this Java-based VPN client running, and if you follow this tutorial, you&rsquo;ll have it working in no time.</p><p>First, you will need to ensure the &lsquo;nosudo&rsquo; option is NOT enabled for /home in /etc/fstab. Please don&rsquo;t curse at me. I didn&rsquo;t write this app. The reason you have to take a major step back in security is because the app needs to modify routing tables, overwrite your /etc/hosts and /etc/resolv.conf, load the tun module and create a tun device. It will install two setuid root binaries into ~/.juniper_networks/network_connect/. If the option is enabled, remove the option and remount /home:</p><p>Next, you will need to ensure you have all the gcc and g++ 32-bit packages installed (gcc-multilib and g++-multilib in Debian/Ubuntu) as well as the 32-bit libraries (ia32-libs) and libstdc++ (libstdc++6 on Debian unstable).</p><p>Now install xterm. Yes, xterm. I&rsquo;m not kidding.</p><p>Also make sure sudo is installed and configured for your user, though it&rsquo;s rare to find a distro that doesn&rsquo;t install sudo by default anymore.</p><p>And now for the fun part. You should probably already have the 64-bit Java JRE installed, and we&rsquo;ll assume you install it manually to stay up to date, so let&rsquo;s unzip it into /opt/jre1.7.0_04-64 if you don&rsquo;t already have it somewhere. Also get the 32-bit version and put it in /opt/jre1.7.0_04-32 . Move /opt/jre1.7.0_04-64/bin/java to /opt/jre1.7.0_04-64/bin/java.orig and create a bash script at /opt/jre1.7.0_04-64/bin/java :</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=color:#719e07>#!/bin/bash
</span><span style=color:#719e07></span>
<span style=color:#268bd2>VERSION</span><span style=color:#719e07>=</span><span style=color:#2aa198>&#34;1.7.0_04&#34;</span>

<span style=color:#719e07>if</span> <span style=color:#719e07>[</span> <span style=color:#268bd2>$3</span>x <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;NCx&#34;</span> <span style=color:#719e07>]</span>
<span style=color:#719e07>then</span>
    /opt/jre<span style=color:#2aa198>${</span><span style=color:#268bd2>VERSION</span><span style=color:#2aa198>}</span>-32/bin/java <span style=color:#2aa198>&#34;</span><span style=color:#268bd2>$@</span><span style=color:#2aa198>&#34;</span>
<span style=color:#719e07>else</span>
    /opt/jre<span style=color:#2aa198>${</span><span style=color:#268bd2>VERSION</span><span style=color:#2aa198>}</span>-64/bin/java.orig <span style=color:#2aa198>&#34;</span><span style=color:#268bd2>$@</span><span style=color:#2aa198>&#34;</span>
<span style=color:#719e07>fi</span>
</code></pre></div><p>Make sure your new script is executable:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash>chmod <span style=color:#2aa198>0755</span> /opt/jre1.7.0_04-64/bin/java
</code></pre></div><p>The final step is to create a symlink to the 64-bit version of Java&rsquo;s JRE plugin in Firefox&rsquo;s plugins directory (which you will create if it doesn&rsquo;t exist).</p><p>This assumes you&rsquo;re using 64-bit Firefox and you&rsquo;ve installed it in /opt/firefox:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash>mkdir /opt/firefox/plugins 2&gt;/dev/null
ln -s /opt/jre1.7.0_04-64/lib/amd64/libnpjp2.so /opt/firefox/plugins/libnpjp2.so
</code></pre></div><p>Problem solved!</p><p>UPDATE: Tested and Juniper NC works with the latest (1.7.0_04) JRE as of this writing. Updated version numbers above</p><p>Credit for the script goes to the following forum post on Ubuntu forums:</p><p><a href="http://ubuntuforums.org/showpost.php?p=11189826&postcount=441">http://ubuntuforums.org/showpost.php?p=11189826&postcount=441</a></p><br><p class=back-to-posts><a href=/blog>Back to posts</a></p></div><br><div class=disqus></div></div></div></section></body></html>